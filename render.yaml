# render.yaml â€” Unified Blueprint
version: "1"

services:
  # -----------------------------
  # Backend Service (Docker)
  # -----------------------------
  - type: web
    name: document-a11y-backend
    runtime: docker
    repo: https://github.com/sumitsinha2000/document-a11y-acclerator
    dockerContext: .
    dockerfilePath: ./Dockerfile
    plan: free
    region: oregon
    healthCheckPath: /api/health
    autoDeployTrigger: commit

    envVars:
      - key: NEON_DATABASE_URL
        sync: false
      - key: FRONTEND_URL
        sync: false
      - key: STACK_SECRET_SERVER_KEY
        sync: false
      - key: B2_APPLICATION_KEY
        sync: false
      - key: B2_KEY_ID
        sync: false
      - key: B2_BUCKET_NAME
        sync: false

  # -----------------------------
  # Frontend Service (Static)
  # -----------------------------
  - type: web
    name: document-a11y-acclerator
    runtime: static
    repo: https://github.com/sumitsinha2000/document-a11y-acclerator
    rootDir: frontend

    buildCommand: npm install && npm run build
    staticPublishPath: dist
    autoDeployTrigger: commit

    envVars:
      - key: VITE_API_BASE_URL
        sync: false
